# 问答插件 (rqhwenda)

这是一个基于 NcatBot 的智能问答插件，支持精确匹配和模糊匹配两种问答模式，适用于 QQ 群机器人等场景。

## 功能特性

- **双重匹配模式**：
  - 精确匹配：完全匹配问题内容
  - 模糊匹配：支持相似度匹配，更加灵活
- **线程安全的数据管理**：使用锁机制确保并发环境下的数据一致性
- **智能文本预处理**：标准化换行符、标点符号和空白字符
- **管理员权限控制**：区分管理员和普通用户权限
- **黑白名单机制**：支持设置黑名单用户

## 安装与配置

### 依赖要求
- NcatBot 框架
- Python 3.x

### 文件结构
```
rqhwenda/
├── plugin.py          # 主插件文件
├── __init__.py        # 模块初始化文件
├── precise_ans.json   # 精确问答数据库
├── fuzzy_ans.json     # 模糊问答数据库
└── README.md          # 说明文档
```

## 使用方法

### 用户权限说明
- **管理员 (gly)**：可以添加、修改、删除问答
- **黑名单 (hmd)**：无法使用问答功能
- **普通用户**：可查询问答，但无法修改

### 基础命令

#### 查询问答
直接发送问题内容即可查询对应答案，系统会优先进行精确匹配，若无结果则进行模糊匹配。

#### 管理员命令

| 命令 | 说明 |
|------|------|
| `精确问问题内容答答案内容` | 添加精确问答对 |
| `模糊问问题内容答答案内容` | 添加模糊问答对 |
| `修改原问题答新答案` | 修改已有问答对 |
| `删问答问题内容` | 删除指定问答对 |
| `列出所有问答` | 查看全部问答（合并显示） |
| `列出部分问答` | 随机查看部分问答 |
| `清空所有问答` | 清空全部问答数据 |
| `问答帮助` | 显示帮助信息 |

## 技术特点

### 数据管理
- 支持精确和模糊问答数据分离存储
- 采用临时文件机制确保数据写入安全性
- 自动创建缺失的问答文件

### 匹配算法
- **精确匹配**：支持完全匹配和预处理后匹配
- **模糊匹配**：综合考虑包含关系、公共子串、词汇重叠度等多种因素

### 文本预处理
- 标准化换行符为单个空格
- 统一多个连续空格为单个空格
- 移除首尾空白字符

## 配置说明

### 黑名单和管理员列表
在 `plugin.py` 中可以配置：

```python
hmd = ["889989898"]  # 黑名单用户QQ号列表
gly = ["123466"]  # 管理员QQ号列表
```

### 数据文件路径
```python
answer_manager = AnswerManager("plugins/rqhwenda/precise_ans.json", "plugins/rqhwenda/fuzzy_ans.json")
```

## 插件信息

- **插件名称**: rqhwenda
- **插件版本**: 0.5.0
- **主要功能**: 智能问答系统
- **适用平台**: 基于 NcatBot 的群聊机器人

## 开发者信息

此插件实现了智能的问答匹配功能，通过精确匹配和模糊匹配相结合的方式，提高了问答系统的灵活性和准确性。